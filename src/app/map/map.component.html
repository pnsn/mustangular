<div [ngClass]="{'overlay-blur': inProgress}">
  <app-station></app-station>
  <mat-sidenav-container id="content">

    <mat-sidenav-content class="mat-elevation-z1">
      <app-markers ></app-markers>
    </mat-sidenav-content>

    <mat-sidenav #sidenav id="sidebar" mode="side" opened position="end" class="mat-elevation-z4">
      <app-controls ></app-controls>
    </mat-sidenav>

  </mat-sidenav-container>
  <mat-toolbar id="header" class="mat-elevation-z5" fxFlexLayout="column" >
    <ng-container *ngIf="activeMetric" >
      <div class="title"> {{activeMetric.title}} Metric</div>
    </ng-container>
    <ul id="query-info" *ngIf="query" fxFlex="auto" >
      <li> Dates: <span> {{query.start | date:'shortDate'}} - {{query.end | date:'shortDate'}}</span></li>
      <li *ngIf="query.net"> Net: <span> {{query.net}} </span> </li>
      <li *ngIf="query.sta"> Sta: <span> {{query.sta}} </span> </li>
      <li *ngIf="query.cha"> Cha: <span> {{query.cha}} </span> </li>
      <li *ngIf="query.loc"> Loc: <span> {{query.loc}} </span> </li>
      <li *ngIf="query.qual"> Qual: <span> {{query.qual}} </span> </li>

    </ul>
    <button mat-button color="primary" id="edit-query" routerLink="/form" queryParamsHandling="merge">
      Edit Query
    </button>

  </mat-toolbar>
</div>

<div class="overlay" fxLayout fxLayoutAlign="center center" *ngIf="inProgress">
  
  <div class="overlay-message" fxLayout="column" >
    <p fxFlexAlign="center">{{message}}</p>
    <fa name="spinner" animation="spin" size="2x" fxFlexAlign="center"></fa>
  </div>
  <div class="overlay-background"> </div>
</div>



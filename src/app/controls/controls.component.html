<form #controlForm="ngForm" (ngSubmit)="onSubmit(controlForm)" *ngIf="activeMetric">

    <span>Available Metrics</span>

    <mat-radio-group class="select-active" [ngModel]="activeMetric.name" (ngModelChange)="metricChanged($event)" name="metric">
        <mat-radio-button *ngFor="let metric of metrics" [value]="metric.name">
            {{metric.title}}
        </mat-radio-button>
    </mat-radio-group>

    <mat-divider></mat-divider>

    <div>Channel stuff here</div>


    <mat-divider></mat-divider>

    Display options for {{activeMetric.title}}
    
   <div>Display Value</div>
    <mat-radio-group class="select-active" [(ngModel)]="display.displayValue" (ngModelChange)="valueChanged()" name="values">
        <mat-radio-button *ngFor="let value of displayValues" [value]="value" [name]="value">
            {{value}}
        </mat-radio-button>
    </mat-radio-group>

    <mat-divider></mat-divider>
    <div>Binning </div>
    <!-- <mat-slider min="1" max="5" step="0.5" value="1.5"></mat-slider> -->

    <!--make this some sort of form group so it changes when you leave, not on individual  -->

    <mat-form-field>
        <input matInput required type="number" placeholder="Minimum" [(ngModel)]="display.binning.min" (ngModelChange)="valueChanged()" max="{{display.binning.max - 1}}" name="minimum">
    </mat-form-field>
    <mat-form-field>
        <input matInput required type="number" placeholder="Maximum" [(ngModel)]="display.binning.max" (ngModelChange)="valueChanged()" min="{{display.binning.min + 1}}" name="maximum">
    </mat-form-field>


    <mat-form-field>
        <input matInput required type="number" placeholder="Count" [(ngModel)]="display.binning.count" (ngModelChange)="valueChanged()" min="1" max="25" name="count">
    </mat-form-field>

    <div>Coloring</div>
    Low
      <input class="color" [(colorPicker)]="display.coloring.low" [cpPosition]="left" [style.background]="display.coloring.low" (colorPickerChange)="valueChanged()" name="low" />
      <input class="color" [(colorPicker)]="display.coloring.high" [cpPosition]="left" [style.background]="display.coloring.high" (colorPickerChange)="valueChanged()" name="high" />

    <div></div>
    <button mat-raised-button color="primary" [disabled]="!changed" type="submit">
        Update
    </button>
    <p *ngIf="changed">Warning! Display Not Updated</p>
</form>